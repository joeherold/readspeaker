<?php

// Add slimbox style sheet
$GLOBALS['TL_CSS'][] = 'assets/mootools/slimbox/' . SLIMBOX . '/css/slimbox.css||static';

?>

<script type="text/javascript" src="<?php echo TL_ASSETS_URL; ?>assets/mootools/slimbox/<?php echo SLIMBOX; ?>/js/slimbox.js"></script>
<script type="text/javascript">
    /* <![CDATA[ */
    (function($) {

        var makeSlimbox = function(container) {
            selector = 'lbImage';
            selector_next = 'lbNextLink';
            selector_prev = 'lbPrevLink';
            if (container) {
                selector = '#' + container + ' ' + 'lbImage';
                selector_next = '#' + container + ' ' + 'lbNextLink';
                selector_prev = '#' + container + ' ' + 'lbPrevLink';
            }
            
            $$(document.links).filter(function(el) {
                return el.rel && el.rel.test(/^lightbox/i);
            }).slimbox({
                // Put custom options here
            }, null, function(el) {
                return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
            });
            $(selector).addEvent('swipe', function(e) {
                (e.direction == 'left') ? $(selector_next).fireEvent('click') : $(selector_prev).fireEvent('click');
            });
        }
        window.addEvent('domready', function() {
            makeSlimbox();
        });

        document.addEventListener("onRsContentChanged", function(e) {
            container = e.detail.container;
            makeSlimbox(container);
        });
    })(document.id);
    /* ]]> */
</script>
